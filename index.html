<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ó–∞—Ä–ø–ª–∞—Ç–Ω—ã–π –æ–ø—Ä–æ—Å –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f9fc;
            margin: 0;
            padding: 0;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ñ–æ—Ä–º—ã */
        .form-container {
            max-width: 900px;
            width: 90%;
            margin: 30px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        /* –í–µ—Ä—Ö–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–æ—Ä–º */
        .form-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin-bottom: 8px;
            font-weight: bold;
            text-align: center;
            padding: 10px;
        }

        /* –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º—ã */
        .form-row {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 8px;
            justify-content: center;
            align-items: center;
        }

        /* –ù–∞ –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö (–ü–ö) —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º .form-header –∏ .form-row –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ */
        @media (min-width: 768px) {
            .form-header {
                flex-direction: row;
                justify-content: space-evenly;
            }
            .form-row {
                flex-direction: row;
                justify-content: space-evenly;
                align-items: center;
            }
        }

        select,
        input {
            padding: 8px;
            text-align: center;
            border-radius: 4px;
            border: 1px solid #ced4da;
            background-color: #fff;
            max-width: 200px;
        }
        input.long-input {
            max-width: 100%;
            width: 100%;
        }
        select:focus,
        input:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
        }

        .delete-btn {
            background-color: #dc3545; /* –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
            border: none;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            color: #fff;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }

        button {
            padding: 10px 20px;
            margin: 10px 0;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }

        hr {
            margin: 20px 0;
            border: none;
            border-top: 1px solid #ddd;
        }

        p {
            margin: 15px 0;
            font-size: 14px;
            color: #666;
            line-height: 1.4;
            text-align: left;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <!-- –°–Ω–æ—Å–∫–∞ –æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–ª–µ–π -->
        <p>–í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ –∂–µ–ª–∞–Ω–∏—é. <br />
        –í –ø–æ–ª–µ –ó–∞—Ä–ø–ª–∞—Ç–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –≤ —Ç—ã—Å—è—á–∞—Ö —Ä—É–±–ª–µ–π –¥–æ –≤—ã—á–µ—Ç–∞ –Ω–∞–ª–æ–≥–æ–≤.</p>

        <hr />

        <!-- –ü–æ–ª—è: –§–∞–º–∏–ª–∏—è, –ò–º—è, –û—Ç—á–µ—Å—Ç–≤–æ -->
        <div class="form-row">
            <input type="text" placeholder="–§–∞–º–∏–ª–∏—è" id="last-name" />
            <input type="text" placeholder="–ò–º—è" id="first-name" />
            <input type="text" placeholder="–û—Ç—á–µ—Å—Ç–≤–æ" id="middle-name" />
        </div>

        <!-- –î–ª–∏–Ω–Ω–æ–µ –ø–æ–ª–µ –ö–æ–Ω—Ç–∞–∫—Ç -->
        <div class="form-row">
            <input type="text" class="long-input" placeholder="—Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä, –ø—Ä–æ—Ñ–∏–ª—å –≤ —Å–æ—Ü. —Å–µ—Ç—è—Ö –∏–ª–∏ –∞–¥—Ä–µ—Å –ø–æ—á—Ç—ã" id="contact-field" />
        </div>

        <hr />

        <!-- –ö–£–†–°–´ -->
        <div class="form-header">
            <span>–ì–æ–¥</span>
            <span>–ö—É—Ä—Å</span>
            <span>–ö–∞—Ñ–µ–¥—Ä–∞</span>
            <span>–ö–æ–º–ø–∞–Ω–∏—è</span>
            <span>–ó–∞—Ä–ø–ª–∞—Ç–∞</span>
        </div>
        <div id="form-list"></div>
        <button onclick="addRow()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>

        <hr />

        <!-- –ü–û–°–õ–ï –í–´–ü–£–°–ö–ê -->
        <div class="form-header" style="margin-top: 10px;">
            <span>–ì–æ–¥</span>
            <span>–ü–æ—Å–ª–µ –≤—ã–ø—É—Å–∫–∞</span>
            <span>–ö–æ–º–ø–∞–Ω–∏—è</span>
            <span>–ó–∞—Ä–ø–ª–∞—Ç–∞</span>
        </div>
        <div id="post-graduation-list"></div>
        <button onclick="addPostGraduationRow()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>

        <hr />

        <p style="margin-top: 20px;">
            –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –î–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è. <br />
            –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞:
            <a href="https://github.com/cheptil/salary" target="_blank">github.com/cheptil/salary</a>
        </p>
        <button onclick="saveResults()" style="margin-top: 10px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</button>
    </div>

    <script>
        // –ö–£–†–°–´
        const allCourses = [
            "1 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞", "2 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞", "3 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞", "4 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "1 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã", "2 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã",
            "1 –∫—É—Ä—Å –∞—Å–ø–∏—Ä–∞–Ω—Ç—É—Ä—ã", "2 –∫—É—Ä—Å –∞—Å–ø–∏—Ä–∞–Ω—Ç—É—Ä—ã", "3 –∫—É—Ä—Å –∞—Å–ø–∏—Ä–∞–Ω—Ç—É—Ä—ã", "4 –∫—É—Ä—Å –∞—Å–ø–∏—Ä–∞–Ω—Ç—É—Ä—ã"
        ];

        function isBachFirstSecond(course) {
            return course === "1 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞" || course === "2 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞";
        }

        // –ú–∞—Å—Å–∏–≤ –∫–∞—Ñ–µ–¥—Ä (–±–µ–∑ "–ù–µ—Ç –∫–∞—Ñ–µ–¥—Ä—ã").
        const departmentsAll = [
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∑–∏–∫–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –û–±—â–µ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –°–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–∏–±–µ—Ä–Ω–µ—Ç–∏–∫–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ù–µ–ª–∏–Ω–µ–π–Ω—ã—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –°–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏—Ö —è–∑—ã–∫–æ–≤",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –°—É–ø–µ—Ä–∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –∏ –∫–≤–∞–Ω—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏",
            "–ö–∞—Ñ–µ–¥—Ä–∞ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π"
        ];

        // –ü–æ—Ä—è–¥–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        const initialCoursesList = [
            "1 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "2 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "3 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "4 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "1 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã",
            "2 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã"
        ];

        // –î–∏–∞–ø–∞–∑–æ–Ω –≥–æ–¥–æ–≤
        const years = Array.from({ length: 38 }, (_, i) => 1990 + i);

        function createOptions(arr) {
            return arr.map(item => `<option>${item}</option>`).join('');
        }

        function renderDeptElement(wrapper, course, currentValue = '') {
            wrapper.innerHTML = '';

            if (isBachFirstSecond(course)) {
                const input = document.createElement('input');
                input.type = 'text';
                input.readOnly = true;
                input.value = '–ù–µ—Ç –∫–∞—Ñ–µ–¥—Ä—ã';
                input.classList.add('dept-readonly');
                wrapper.appendChild(input);
            } else {
                const select = document.createElement('select');
                select.classList.add('dept-select');
                let optionsHtml = `<option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ñ–µ–¥—Ä—É</option>`;
                optionsHtml += createOptions(departmentsAll);
                select.innerHTML = optionsHtml;
                wrapper.appendChild(select);

                if (currentValue && departmentsAll.includes(currentValue)) {
                    select.value = currentValue;
                }
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É (–ö–£–†–°–´) –∏ –¥—É–±–ª–∏—Ä—É–µ–º "–ö–æ–º–ø–∞–Ω–∏—è" –∏ "–ó–∞—Ä–ø–ª–∞—Ç–∞" –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
        function addRow(year = null, course = null, deptValue = null, companyVal = '') {
            const container = document.getElementById('form-list');
            const last = container.lastElementChild;

            let nextYear = 2012;
            let nextCourse = allCourses[0];
            let nextDept = deptValue || '';
            let nextCompany = companyVal;
            let lastSalaryVal = '';

            if (last) {
                const y = last.querySelector('.year-select');
                const c = last.querySelector('.course-select');
                const deptWrapper = last.querySelector('.dept-wrapper');
                const comp = last.querySelector('.company-input');
                const lastSalaryInput = last.querySelector("input[type='number']");

                if (y) {
                    nextYear = parseInt(y.value) + 1;
                }

                if (c) {
                    let curIndex = allCourses.indexOf(c.value);
                    if (curIndex < 0) curIndex = 0;
                    let nextIndex = curIndex + 1;
                    if (nextIndex >= allCourses.length) nextIndex = allCourses.length - 1;
                    nextCourse = allCourses[nextIndex];
                }

                if (deptWrapper) {
                    const deptSel = deptWrapper.querySelector('.dept-select');
                    const deptInp = deptWrapper.querySelector('.dept-readonly');
                    if (deptSel) {
                        nextDept = deptSel.value;
                    } else if (deptInp) {
                        nextDept = deptInp.value;
                    }
                }

                if (comp) {
                    nextCompany = comp.value;
                }

                if (lastSalaryInput) {
                    lastSalaryVal = lastSalaryInput.value;
                }
            }

            if (year !== null) nextYear = year;
            if (course !== null) nextCourse = course;
            if (deptValue !== null) nextDept = deptValue;
            if (companyVal !== '') nextCompany = companyVal;

            const row = document.createElement('div');
            row.classList.add('form-row');

            row.innerHTML = `
                <select class=\"year-select\">${createOptions(years)}</select>
                <select class=\"course-select\">${createOptions(allCourses)}</select>
                <span class=\"dept-wrapper\"></span>
                <input type=\"text\" class=\"company-input\" placeholder=\"–ö–æ–º–ø–∞–Ω–∏—è\" />
                <input type=\"number\" placeholder=\"–ó–∞—Ä–ø–ª–∞—Ç–∞\" />
                <button class=\"delete-btn\" onclick=\"removeRow(this)\">üóë</button>
            `;

            container.appendChild(row);

            const yearSel = row.querySelector('.year-select');
            const courseSel = row.querySelector('.course-select');
            const deptWrapper = row.querySelector('.dept-wrapper');
            const compInp = row.querySelector('.company-input');
            const newSalaryInput = row.querySelector("input[type='number']");

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
            yearSel.value = nextYear;
            courseSel.value = nextCourse;
            compInp.value = nextCompany;
            newSalaryInput.value = lastSalaryVal;

            // –†–µ–Ω–¥–µ—Ä–∏–º –∫–∞—Ñ–µ–¥—Ä—É
            renderDeptElement(deptWrapper, nextCourse, nextDept);

            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ñ–µ–¥—Ä—ã –ø—Ä–∏ —Å–º–µ–Ω–µ –∫—É—Ä—Å–∞
            courseSel.addEventListener('change', () => {
                renderDeptElement(deptWrapper, courseSel.value);
            });
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É (–ü–û–°–õ–ï –í–´–ü–£–°–ö–ê) –∏ –¥—É–±–ª–∏—Ä—É–µ–º "–ö–æ–º–ø–∞–Ω–∏—è" –∏ "–ó–∞—Ä–ø–ª–∞—Ç–∞" –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
        function addPostGraduationRow(yearParam = null) {
            const container = document.getElementById('post-graduation-list');
            const last = container.lastElementChild;

            let nextYear = 2018;
            let lastSalaryVal = '';
            let lastCompanyVal = '';

            if (last) {
                const yearSel = last.querySelector('.year-select');
                const lastSalaryInput = last.querySelector("input[type='number']");
                const lastCompanyInput = last.querySelector('.company-input');

                if (yearSel) {
                    nextYear = parseInt(yearSel.value) + 1;
                }
                if (lastSalaryInput) {
                    lastSalaryVal = lastSalaryInput.value;
                }
                if (lastCompanyInput) {
                    lastCompanyVal = lastCompanyInput.value;
                }
            } else if (yearParam !== null) {
                nextYear = yearParam;
            }

            const row = document.createElement('div');
            row.classList.add('form-row');
            row.innerHTML = `
                <select class=\"year-select\">${createOptions(years)}</select>
                <input type=\"text\" class=\"after-release\" value=\"–í—ã–ø—É—Å–∫–Ω–∏–∫\" readonly />
                <input type=\"text\" class=\"company-input\" placeholder=\"–ö–æ–º–ø–∞–Ω–∏—è\" />
                <input type=\"number\" placeholder=\"–ó–∞—Ä–ø–ª–∞—Ç–∞\" />
                <button class=\"delete-btn\" onclick=\"removeRow(this)\">üóë</button>
            `;

            container.appendChild(row);

            const yearSel = row.querySelector('.year-select');
            const salaryInp = row.querySelector("input[type='number']");
            const companyInp = row.querySelector('.company-input');

            yearSel.value = nextYear;
            salaryInp.value = lastSalaryVal;
            companyInp.value = lastCompanyVal;
        }

        function removeRow(btn) {
            btn.parentElement.remove();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const initCourses = [
            "1 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "2 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "3 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "4 –∫—É—Ä—Å –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞",
            "1 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã",
            "2 –∫—É—Ä—Å –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã"
        ];
        for (let i = 0; i < initCourses.length; i++) {
            addRow(2012 + i, initCourses[i]);
        }
        for (let i = 0; i < 3; i++) {
            addPostGraduationRow(2018 + i);
        }

        function saveResults() {
            const userData = {
                lastName: document.getElementById('last-name').value,
                firstName: document.getElementById('first-name').value,
                middleName: document.getElementById('middle-name').value,
                contact: document.getElementById('contact-field').value,
                courses: [],
                postGraduation: []
            };

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–º—è —Ñ–∞–π–ª–∞ {–§–∞–º–∏–ª–∏—è}_{–ò–º—è}_{–û—Ç—á–µ—Å—Ç–≤–æ}_{timestamp}.json,
            // –∏ —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é data
            const timeStamp = Date.now();
            const rawFileName = `${userData.lastName}_${userData.firstName}_${userData.middleName}_${timeStamp}.json`;
            // fileName —Å –ø–æ–¥–ø—É—Ç—ë–º "data"
            const fileName = `data/${rawFileName}`;

            userData.fileName = fileName;

            // –°–±–æ—Ä –ø–æ–ª–µ–π "–ö–£–†–°–´"
            const courseRows = document.querySelectorAll('#form-list .form-row');
            courseRows.forEach(row => {
                const year = row.querySelector('.year-select').value;
                const course = row.querySelector('.course-select').value;
                const comp = row.querySelector('.company-input').value;
                const salary = row.querySelector("input[type='number']").value;

                const deptWrapper = row.querySelector('.dept-wrapper');
                let deptVal = '';

                const deptSel = deptWrapper.querySelector('.dept-select');
                const deptInp = deptWrapper.querySelector('.dept-readonly');
                if (deptSel) {
                    deptVal = deptSel.value;
                } else if (deptInp) {
                    deptVal = deptInp.value;
                }

                userData.courses.push({
                    year,
                    course,
                    department: deptVal,
                    company: comp,
                    salary
                });
            });

            // –°–±–æ—Ä –ø–æ–ª–µ–π "–ü–û–°–õ–ï –í–´–ü–£–°–ö–ê"
            const postRows = document.querySelectorAll('#post-graduation-list .form-row');
            postRows.forEach(row => {
                const year = row.querySelector('.year-select').value;
                const status = row.querySelector('.after-release').value;
                const comp = row.querySelector('.company-input').value;
                const salary = row.querySelector("input[type='number']").value;

                userData.postGraduation.push({
                    year,
                    status,
                    company: comp,
                    salary
                });
            });

            // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
            console.log('JSON –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', userData);

            fetch('/save-results', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ö–æ–¥: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                    console.log('–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);

                    // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥" —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
                    if (!document.getElementById('back-btn')) {
                        const backButton = document.createElement('button');
                        backButton.textContent = '–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥';
                        backButton.id = 'back-btn';
                        backButton.addEventListener('click', () => {
                            window.location.href = 'https://cmc.msut.me/salary';
                        });
                        document.querySelector('.form-container').appendChild(backButton);
                    }
                })
                .catch(err => {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. ' + err);
                    console.error('Fetch error:', err);
                });
        }
    </script>
</body>
</html>
